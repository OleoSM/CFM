<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CEFIMAT Asesor\u00EDas - Plataforma de Cuestionarios</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="js/api.js"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'system-ui', 'sans-serif'] }
                }
            }
        }
    </script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');

        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html {
            overflow-x: hidden;
            height: 100%;
        }

        body {
            font-family: 'Inter', system-ui, sans-serif;
            background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
            min-height: 100vh;
            overflow-x: hidden;
            transition: background 0.3s;
        }

        body.dark {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        }

        .glass-light {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(0, 0, 0, 0.05);
        }

        .glass-dark {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Optimizaci\u00F3n m\u00F3vil: desactivar animaciones costosas */
        @media (min-width: 768px) {
            .fade-in {
                animation: fadeIn 0.6s ease-out;
            }

            @keyframes fadeIn {
                from {
                    opacity: 0;
                    transform: translateY(30px);
                }

                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            .subject-card {
                transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
                position: relative;
                overflow: hidden;
            }

            .subject-card::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.2) 0%, transparent 100%);
                opacity: 0;
                transition: opacity 0.4s;
            }

            .subject-card:not(.locked):hover::before {
                opacity: 1;
            }

            .subject-card:not(.locked):hover {
                transform: translateY(-12px) scale(1.03);
                box-shadow: 0 30px 60px -15px rgba(0, 0, 0, 0.3);
            }

            .subject-card .icon-wrapper {
                transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            }

            .subject-card:not(.locked):hover .icon-wrapper {
                transform: scale(1.1) rotate(5deg);
            }

            .hero-badge {
                animation: float 3s ease-in-out infinite;
            }

            @keyframes float {

                0%,
                100% {
                    transform: translateY(0px);
                }

                50% {
                    transform: translateY(-10px);
                }
            }

            .social-link {
                transition: all 0.3s;
            }

            .social-link:hover {
                transform: translateY(-3px);
            }

            .theme-toggle:hover {
                transform: rotate(180deg);
            }

            /* Animaci\u00F3n de entrada para las cards */
            .card-1 {
                animation-delay: 0.1s;
            }

            .card-2 {
                animation-delay: 0.2s;
            }

            .card-3 {
                animation-delay: 0.3s;
            }
        }

        /* M\u00F3vil: sin animaciones */
        @media (max-width: 767px) {

            .fade-in,
            .hero-badge,
            .subject-card,
            .social-link {
                animation: none !important;
                opacity: 1 !important;
                transform: none !important;
            }

            .subject-card::before {
                display: none;
            }

            .glass-light,
            .glass-dark {
                backdrop-filter: blur(10px);
            }
        }

        .gradient-text {
            background: linear-gradient(135deg, #6366f1, #a855f7, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .nav-blur {
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }

        .theme-toggle {
            transition: transform 0.3s;
        }

        .user-dropdown {
            position: relative;
        }

        .user-dropdown-menu {
            position: absolute;
            top: calc(100% + 0.5rem);
            right: 0;
            min-width: 250px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s;
            z-index: 100;
        }

        .user-dropdown.active .user-dropdown-menu {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 12px;
            background: linear-gradient(135deg, #6366f1, #a855f7);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 16px;
            color: white;
            text-transform: uppercase;
        }

        /* Mobile menu styles */
        .mobile-menu {
            position: fixed;
            top: 0;
            right: -100%;
            width: 280px;
            height: 100vh;
            transition: right 0.3s ease-in-out;
            z-index: 200;
            overflow-y: auto;
        }

        .mobile-menu.active {
            right: 0;
        }

        .menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(0, 0, 0, 0.5);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
            z-index: 199;
        }

        .menu-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        @media (min-width: 768px) {
            .mobile-menu-button {
                display: none;
            }
        }
    </style>
</head>

<body id="body">
    <!-- Navigation -->
    <nav id="nav" class="nav-blur sticky top-0 z-50"></nav>

    <!-- Main Content -->
    <main id="main" class="container mx-auto px-4 py-12 max-w-7xl">
        <!-- Hero Section -->
        <section id="hero" class="text-center space-y-6 mb-16 fade-in"></section>

        <!-- Subject Cards -->
        <section id="subjects" class="max-w-5xl mx-auto mb-16"></section>

        <!-- Coming Soon -->
        <section id="comingSoon" class="max-w-4xl mx-auto mb-16 fade-in"></section>
    </main>

    <!-- Footer -->
    <footer id="footer" class="mt-20"></footer>

    <script>
        // Check authentication on page load
        const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
        if (!isLoggedIn) {
            window.location.href = 'auth.html';
        }

        // Get user data
        const userData = JSON.parse(localStorage.getItem('userData') || '{}');

        // State
        const state = {
            darkMode: localStorage.getItem('darkMode') !== 'false',
            userName: userData.name || '',
            userGroup: userData.group || '',
            mobileMenuOpen: false
        };

        function isUnlocked() {
            return isLoggedIn && state.userName.trim().length > 0 && state.userGroup.trim().length > 0;
        }

        function logout() {
            api.logout();
        }

        function toggleUserDropdown(event) {
            event.stopPropagation();
            const dropdown = document.querySelector('.user-dropdown');
            dropdown.classList.toggle('active');
        }

        // Toggle mobile menu
        function toggleMobileMenu() {
            state.mobileMenuOpen = !state.mobileMenuOpen;
            const menu = document.querySelector('.mobile-menu');
            const overlay = document.querySelector('.menu-overlay');

            if (state.mobileMenuOpen) {
                menu.classList.add('active');
                overlay.classList.add('active');
                document.body.style.overflow = 'hidden';
            } else {
                menu.classList.remove('active');
                overlay.classList.remove('active');
                document.body.style.overflow = '';
            }
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function () {
            const dropdown = document.querySelector('.user-dropdown');
            if (dropdown && dropdown.classList.contains('active')) {
                dropdown.classList.remove('active');
            }
        });

        // Toggle dark mode
        function toggleDarkMode() {
            state.darkMode = !state.darkMode;
            localStorage.setItem('darkMode', state.darkMode);
            applyTheme();
        }

        function applyTheme() {
            const body = document.getElementById('body');
            if (state.darkMode) {
                body.classList.add('dark');
            } else {
                body.classList.remove('dark');
            }
            render();
        }

        function render() {
            const isDark = state.darkMode;

            const glassClass = isDark ? 'glass-dark' : 'glass-light';
            const textPrimary = isDark ? 'text-white' : 'text-slate-900';
            const textSecondary = isDark ? 'text-slate-400' : 'text-slate-600';
            const textMuted = isDark ? 'text-slate-500' : 'text-slate-400';
            const borderColor = isDark ? 'border-white/10' : 'border-black/10';

            // Navigation
            document.getElementById('nav').innerHTML = `
                <div class="${glassClass} shadow-lg">
                    <div class="container mx-auto px-3 sm:px-6 py-3 sm:py-4 max-w-7xl">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-2 sm:gap-4">
                                <img src="Logo/Logo Cefimat Videos.png" alt="CEFIMAT Logo" class="h-8 sm:h-12 w-auto object-contain">
                                <div class="border-l ${borderColor} pl-2 sm:pl-4 h-8 sm:h-12 flex flex-col justify-center">
                                    <h1 class="text-sm sm:text-lg font-black ${textPrimary}">CEFIMAT</h1>
                                    <p class="text-[8px] sm:text-[9px] ${textMuted} uppercase tracking-widest">Asesor\u00EDas</p>
                                </div>
                            </div>
                            
                            <!-- Desktop menu -->
                            <div class="hidden md:flex items-center gap-3">
                                <button onclick="toggleDarkMode()" class="theme-toggle w-11 h-11 rounded-xl ${glassClass} flex items-center justify-center ${textSecondary} hover:text-indigo-500 transition-all shadow-md">
                                    <i data-lucide="${isDark ? 'sun' : 'moon'}" class="w-5 h-5"></i>
                                </button>
                                <div class="user-dropdown">
                                    <button onclick="toggleUserDropdown(event)" class="${glassClass} px-4 py-2 rounded-xl flex items-center gap-3 hover:ring-2 hover:ring-indigo-500/50 transition-all shadow-md">
                                        <div class="user-avatar" style="width: 40px; height: 40px; font-size: 16px; border-radius: 12px;">${state.userName.charAt(0)}</div>
                                        <div class="text-left">
                                            <p class="text-sm font-bold ${textPrimary} leading-tight">${state.userName}</p>
                                            <p class="text-xs ${textMuted}">Grupo ${state.userGroup}</p>
                                        </div>
                                        <i data-lucide="chevron-down" class="w-4 h-4 ${textMuted}"></i>
                                    </button>
                                    <div class="user-dropdown-menu ${glassClass} rounded-2xl shadow-2xl overflow-hidden">
                                        <div class="p-4 border-b ${borderColor}">
                                            <p class="text-sm font-bold ${textPrimary}">${state.userName}</p>
                                            <p class="text-xs ${textMuted}">${userData.email || ''}</p>
                                            <div class="mt-2 inline-flex items-center gap-1 px-2 py-1 rounded-lg bg-indigo-500/10 text-indigo-500 text-xs font-bold">
                                                <i data-lucide="users" class="w-3 h-3"></i>
                                                Grupo ${state.userGroup}
                                            </div>
                                        </div>
                                        <button onclick="logout()" class="w-full px-4 py-3 text-left flex items-center gap-3 ${textSecondary} hover:bg-red-500/10 hover:text-red-500 transition-colors">
                                            <i data-lucide="log-out" class="w-4 h-4"></i>
                                            <span class="text-sm font-medium">Cerrar sesi\u00F3n</span>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Mobile hamburger button -->
                            <button onclick="toggleMobileMenu()" class="md:hidden mobile-menu-button w-10 h-10 rounded-xl ${glassClass} flex items-center justify-center ${textSecondary} shadow-md">
                                <i data-lucide="menu" class="w-5 h-5"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Mobile menu overlay -->
                <div class="menu-overlay" onclick="toggleMobileMenu()"></div>

                <!-- Mobile menu -->
                <div class="mobile-menu ${glassClass} shadow-2xl">
                    <div class="p-6 border-b ${borderColor}">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-bold ${textPrimary}">Men\u00FA</h3>
                            <button onclick="toggleMobileMenu()" class="w-10 h-10 rounded-xl ${glassClass} flex items-center justify-center ${textSecondary}">
                                <i data-lucide="x" class="w-5 h-5"></i>
                            </button>
                        </div>
                        <div class="flex items-center gap-3 p-4 rounded-xl ${glassClass}">
                            <div class="user-avatar" style="width: 48px; height: 48px; font-size: 18px; border-radius: 12px;">${state.userName.charAt(0)}</div>
                            <div>
                                <p class="text-sm font-bold ${textPrimary}">${state.userName}</p>
                                <p class="text-xs ${textMuted}">${userData.email || ''}</p>
                                <div class="mt-1 inline-flex items-center gap-1 px-2 py-0.5 rounded-lg bg-indigo-500/10 text-indigo-500 text-xs font-bold">
                                    <i data-lucide="users" class="w-3 h-3"></i>
                                    Grupo ${state.userGroup}
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="p-6 space-y-3">
                        <button onclick="toggleDarkMode()" class="w-full ${glassClass} px-4 py-3 rounded-xl flex items-center gap-3 ${textSecondary} hover:text-indigo-500 transition-all">
                            <i data-lucide="${isDark ? 'sun' : 'moon'}" class="w-5 h-5"></i>
                            <span class="text-sm font-medium">${isDark ? 'Modo Claro' : 'Modo Oscuro'}</span>
                        </button>
                        
                        <button onclick="logout()" class="w-full ${glassClass} px-4 py-3 rounded-xl flex items-center gap-3 ${textSecondary} hover:bg-red-500/10 hover:text-red-500 transition-all">
                            <i data-lucide="log-out" class="w-5 h-5"></i>
                            <span class="text-sm font-medium">Cerrar sesi\u00F3n</span>
                        </button>
                    </div>
                </div>
            `;

            // Hero Section
            document.getElementById('hero').innerHTML = `
                <div class="hero-badge inline-flex items-center gap-2 px-4 sm:px-5 py-2 rounded-full ${glassClass} text-xs text-indigo-500 font-bold shadow-lg">
                    <i data-lucide="sparkles" class="w-3 h-3 sm:w-4 sm:h-4"></i>
                    INGRESO A LICENCIATURA 2026
                </div>
                <h2 class="text-4xl sm:text-5xl md:text-7xl font-black ${textPrimary} leading-tight px-4">
                    Bienvenido, <span class="gradient-text">${state.userName}</span>
                </h2>
                <p class="text-base sm:text-lg ${textSecondary} max-w-2xl mx-auto px-4">
                    Selecciona una materia para acceder a tus cuestionarios interactivos
                </p>
            `;

            // Subject Cards (all unlocked since user is authenticated)
            document.getElementById('subjects').innerHTML = `
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <!-- Historia de M\u00E9xico -->
                    <a href="historia_mexico.html" class="subject-card card-1 fade-in ${glassClass} p-8 rounded-3xl shadow-2xl flex flex-col items-center gap-6 group">
                        <div class="icon-wrapper w-24 h-24 rounded-2xl bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center shadow-2xl">
                            <i data-lucide="scroll-text" class="w-12 h-12 text-white"></i>
                        </div>
                        <div class="text-center">
                                             <h3 class="text-xl font-black text-emerald-600 mb-2">Historia de M\u00E9xico</h3>
                            <p class="text-sm ${textMuted} font-medium">8 unidades disponibles</p>
                            <div class="mt-4 inline-flex items-center gap-2 px-4 py-2 rounded-full bg-emerald-500/10 text-emerald-600 text-xs font-bold">
                                <i data-lucide="book-open" class="w-3 h-3"></i>
                                Ingreso a Licenciatura
                            </div>
                        </div>
                    </a>

                    <!-- Historia Universal -->
                    <a href="historia_universal.html" class="subject-card card-2 fade-in ${glassClass} p-8 rounded-3xl shadow-2xl flex flex-col items-center gap-6 group">
                        <div class="icon-wrapper w-24 h-24 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-2xl">
                            <i data-lucide="globe-2" class="w-12 h-12 text-white"></i>
                        </div>
                        <div class="text-center">
                            <h3 class="text-xl font-black text-indigo-600 mb-2">Historia Universal</h3>
                            <p class="text-sm ${textMuted} font-medium">8 unidades disponibles</p>
                            <div class="mt-4 inline-flex items-center gap-2 px-4 py-2 rounded-full bg-indigo-500/10 text-indigo-600 text-xs font-bold">
                                <i data-lucide="book-open" class="w-3 h-3"></i>
                                Ingreso a Licenciatura
                            </div>
                        </div>
                    </a>

                    <!-- Geograf\u00EDa -->
                    <a href="geografia.html" class="subject-card card-3 fade-in ${glassClass} p-8 rounded-3xl shadow-2xl flex flex-col items-center gap-6 group">
                        <div class="icon-wrapper w-24 h-24 rounded-2xl bg-gradient-to-br from-amber-500 to-orange-600 flex items-center justify-center shadow-2xl">
                            <i data-lucide="map" class="w-12 h-12 text-white"></i>
                        </div>
                        <div class="text-center">
                                             <h3 class="text-xl font-black text-amber-600 mb-2">Geograf\u00EDa</h3>
                            <p class="text-sm ${textMuted} font-medium">2 unidades disponibles</p>
                            <div class="mt-4 inline-flex items-center gap-2 px-4 py-2 rounded-full bg-amber-500/10 text-amber-600 text-xs font-bold">
                                <i data-lucide="book-open" class="w-3 h-3"></i>
                                Ingreso a Licenciatura
                            </div>
                        </div>
                    </a>
                </div>
            `;

            // Coming Soon
            document.getElementById('comingSoon').innerHTML = `
                <div class="${glassClass} rounded-3xl p-8 text-center shadow-xl">
                    <div class="flex items-center justify-center gap-2 mb-4">
                        <i data-lucide="clock" class="w-5 h-5 text-indigo-500"></i>
                                         <h3 class="text-lg font-bold ${textPrimary}">Pr\u00F3ximamente</h3>
                    </div>
                    <p class="text-sm ${textSecondary} mb-6">
                        M\u00E1s materias estar\u00E1n disponibles pronto
                    </p>
                    <div class="flex flex-wrap items-center justify-center gap-3">
                                         ${['Literatura', 'Filosof\u00EDa', 'Matem\u00E1ticas', 'F\u00EDsica', 'Qu\u00EDmica', 'Biolog\u00EDa', 'Espa\u00F1ol'].map(materia =>
                `<span class="px-4 py-2 rounded-full ${glassClass} text-xs ${textMuted} font-semibold">${materia}</span>`
            ).join('')}
                    </div>
                </div>
            `;

            // Footer
            document.getElementById('footer').innerHTML = `
                <div class="${glassClass} border-t ${borderColor}">
                    <div class="container mx-auto px-6 py-8 max-w-7xl">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-8">
                            <!-- Logo & Info -->
                            <div class="space-y-4">
                                <img src="Logo/Logo Cefimat Videos.png" alt="CEFIMAT Logo" class="h-16 w-auto object-contain">
                                     <p class="text-sm ${textSecondary} leading-relaxed">
                                    Centro de preparaci\u00F3n acad\u00E9mica especializado en ingreso a licenciatura.
                                </p>
                            </div>

                            <!-- Redes Sociales -->
                            <div>
                                                 <h4 class="text-sm font-bold ${textPrimary} mb-4 uppercase tracking-wider">S\u00EDguenos</h4>
                                <div class="space-y-3">
                                    <a href="https://open.spotify.com/show/2DRzqIw2dT4negDqeROJCx?si=bbd8e97059c44c04" target="_blank" class="social-link flex items-center gap-3 ${textSecondary} hover:text-green-500 transition-colors">
                                        <div class="w-8 h-8 rounded-lg bg-green-500/10 flex items-center justify-center">
                                            <i data-lucide="music" class="w-4 h-4"></i>
                                        </div>
                                        <span class="text-sm font-medium">Spotify Podcast</span>
                                    </a>
                                    <a href="https://www.facebook.com/cefimatasesorias" target="_blank" class="social-link flex items-center gap-3 ${textSecondary} hover:text-blue-500 transition-colors">
                                        <div class="w-8 h-8 rounded-lg bg-blue-500/10 flex items-center justify-center">
                                            <i data-lucide="facebook" class="w-4 h-4"></i>
                                        </div>
                                        <span class="text-sm font-medium">Facebook</span>
                                    </a>
                                    <a href="https://www.instagram.com/cefimat" target="_blank" class="social-link flex items-center gap-3 ${textSecondary} hover:text-pink-500 transition-colors">
                                        <div class="w-8 h-8 rounded-lg bg-pink-500/10 flex items-center justify-center">
                                            <i data-lucide="instagram" class="w-4 h-4"></i>
                                        </div>
                                        <span class="text-sm font-medium">Instagram</span>
                                    </a>
                                    <a href="https://www.tiktok.com/@cefimat.asesorias" target="_blank" class="social-link flex items-center gap-3 ${textSecondary} hover:text-slate-800 dark:hover:text-white transition-colors">
                                        <div class="w-8 h-8 rounded-lg bg-slate-800/10 flex items-center justify-center">
                                            <i data-lucide="video" class="w-4 h-4"></i>
                                        </div>
                                        <span class="text-sm font-medium">TikTok</span>
                                    </a>
                                    <a href="https://www.cefimat.com/" target="_blank" class="social-link flex items-center gap-3 ${textSecondary} hover:text-indigo-500 transition-colors">
                                        <div class="w-8 h-8 rounded-lg bg-indigo-500/10 flex items-center justify-center">
                                            <i data-lucide="globe" class="w-4 h-4"></i>
                                        </div>
                                        <span class="text-sm font-medium">Sitio Web</span>
                                    </a>
                                </div>
                            </div>

                            <!-- Status -->
                            <div>
                                <h4 class="text-sm font-bold ${textPrimary} mb-4 uppercase tracking-wider">Estado del Sistema</h4>
                                <div class="flex items-center gap-3 p-4 rounded-xl ${glassClass}">
                                    <div class="w-3 h-3 rounded-full bg-emerald-500 animate-pulse"></div>
                                    <div>
                                        <p class="text-sm font-bold text-emerald-500">Sistema Activo</p>
                                        <p class="text-xs ${textMuted}">Todos los servicios operando</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="border-t ${borderColor} pt-6 flex flex-col md:flex-row items-center justify-between gap-4">
                                             <p class="text-xs ${textMuted} uppercase tracking-widest">Â© 2026 CEFIMAT Asesor\u00EDas. Todos los derechos reservados.</p>
                        </div>
                    </div>
                </div>
            `;

            lucide.createIcons();
        }

        // Init
        applyTheme();
    </script>
</body>

</html>